(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{63:(e,s,t)=>{"use strict";var r=t(7260);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},958:(e,s,t)=>{Promise.resolve().then(t.bind(t,1647))},1647:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(5155),a=t(2115),n=t(63);function i(){let e=(0,n.useRouter)(),[s,t]=(0,a.useState)([]),[i,l]=(0,a.useState)(""),[o,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{d()},[]);let d=async()=>{try{let s=localStorage.getItem("user");if(!s)return void e.push("/login");let r=JSON.parse(s),a=await fetch("/api/clients?storeId=".concat(r.storeId));if(a.ok){let e=await a.json();t(e)}else 401===a.status&&e.push("/login")}catch(e){console.error("Error:",e)}finally{c(!1)}},x=s.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.phone.includes(i));return o?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando clientes..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"KOLMA2"}),(0,r.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"text-sm text-gray-600 hover:text-gray-900",children:"â† Dashboard"})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Clientes"}),(0,r.jsx)("button",{onClick:()=>e.push("/dashboard/clients/new"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:"+ Nuevo Cliente"})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("input",{type:"text",placeholder:"Buscar por nombre o tel\xe9fono...",value:i,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),0===x.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDC65"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:i?"No se encontraron clientes":"No tienes clientes a\xfan"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:i?"Intenta con otro t\xe9rmino de b\xfasqueda":"Comienza agregando tu primer cliente"}),!i&&(0,r.jsx)("button",{onClick:()=>e.push("/dashboard/clients/new"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:"Agregar Cliente"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(s=>(0,r.jsxs)("div",{onClick:()=>e.push("/dashboard/clients/".concat(s.id)),className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:s.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCDE ",s.phone]}),s.address&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["\uD83D\uDCCD ",s.address]})]})}),(0,r.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Deuda:"}),(0,r.jsxs)("span",{className:"font-bold ".concat(s.currentDebt>0?"text-red-600":"text-green-600"),children:["RD$ ",(s.currentDebt||0).toLocaleString("es-DO",{minimumFractionDigits:2})]})]})})]},s.id))})]})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=958)),_N_E=e.O()}]);